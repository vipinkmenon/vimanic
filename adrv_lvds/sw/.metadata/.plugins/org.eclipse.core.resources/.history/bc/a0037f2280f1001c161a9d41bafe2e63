#include "spi.h"
#include "xil_types.h"


void spiWrite(u16 address,u8 data){
	u32 writeData=0;
	writeData = ((address&0x3FF)<<8)|data;
	Xil_Out32(XPAR_AD9361SPI_0_S00_AXI_BASEADDR+4,writeData);//0 000 00 00 0000 0010 00000000
	Xil_Out32(XPAR_AD9361SPI_0_S00_AXI_BASEADDR,0x1); //start SPI
	data = Xil_In32(XPAR_AD9361SPI_0_S00_AXI_BASEADDR);
	while(data&0x1){
		data = Xil_In32(XPAR_AD9361SPI_0_S00_AXI_BASEADDR);//wait until spi is done
	}
}
